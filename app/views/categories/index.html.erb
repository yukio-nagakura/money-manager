<h2>カテゴリ一覧</h2>

<%= render_arranged_categories(@categories) %>

<hr>

<h2>カテゴリ追加</h2>

<%= form_with model: @category, url: categories_path, local: true, data: { turbo: false } do |f| %>

  <div>
    <%= f.label :name, "カテゴリ名" %><br>
    <%= f.text_field :name %>
  </div>
  <br>
  <div>
    <%= f.label :ancestry, "親カテゴリ(任意)" %><br>
    <%= f.select :ancestry, Category.all.collect { |c| [c.name, c.id] }, prompt: "-- 親カテゴリーを選択 --" %>
  </div>
  <br>
  <div>
    <%= f.submit "追加する" %>
  </div>
<% end %>

<% if @category.errors.any? %>
  <div style="color: red;">
    <h3>エラーがあります：</h3>
    <ul>
      <% @category.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>  
    </ul>  
  </div>
<% end %>

<% if notice %>
  <p style="color: green;"><%= notice %></p>
<% end %>
